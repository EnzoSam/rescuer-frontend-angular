import{j as u,k as p}from"./chunk-XYCD3XRP.js";import{J as c,M as n,pb as l}from"./chunk-GA2MPP4C.js";var g=(()=>{let i=class i extends u{constructor(e){super(e),this._httpClient=e}};i.\u0275fac=function(t){return new(t||i)(n(l))},i.\u0275prov=c({token:i,factory:i.\u0275fac,providedIn:"root"});let o=i;return o})();var v=(()=>{let i=class i extends g{constructor(e,t){super(e),this._httpClient=e,this._iuService=t,this.nameSpace="auth",t.onAccountStatusChange().subscribe(s=>{this.getRoles().then(r=>{s.roles=r,console.log(s)})})}newLogin(){return{email:"",password:""}}newRegister(){return{email:"",name:"",lastName:"",password:""}}httpClient(){}initRegister(e){return new Promise((t,s)=>{this._httpClient.post(this.getBaseUrlNameSpace()+"no-auth/register",e).subscribe(r=>{t(r)},r=>{s({statusCode:500,message:r})})})}login(e){return new Promise((t,s)=>{this._httpClient.post(this.getBaseUrlNameSpace()+"no-auth/login",e).subscribe(r=>{t(r)},r=>{s(r)})})}validateMail(e,t){return new Promise((s,r)=>{let h={email:e,token:t};this._httpClient.post(this.getBaseUrlNameSpace()+"no-auth/confirm-email",h).subscribe(a=>{s(a)},a=>{r(a)})})}rememberUser(e,t){let s={userName:e,token:t,roles:[]};console.log(s),localStorage.setItem("auth",JSON.stringify(s)),this._iuService.loadAuthentication()}logOut(){localStorage.removeItem("auth"),this._iuService.clearAuth()}requestResetPassword(e){return new Promise((t,s)=>{this._httpClient.post(this.getBaseUrlNameSpace()+"no-auth/request-reset-password",{email:e}).subscribe(r=>{t(r)},r=>{s(r)})})}changePassword(e,t,s){return new Promise((r,h)=>{let a={email:e,token:t,newPassword:s};this._httpClient.post(this.getBaseUrlNameSpace()+"no-auth/change-password",a).subscribe(m=>{r(m)},m=>{h(m)})})}getById(e){return new Promise((t,s)=>{this._httpClient.get(this.getBaseUrlNameSpace()+""+e).subscribe(r=>{t(r)},r=>{s({statusCode:500,message:r})})})}getRoles(){return new Promise((e,t)=>{this._httpClient.get(this.getBaseUrlNameSpace()+"roles").subscribe(s=>{console.log(s),e(s.data)},s=>{t("")})})}};i.\u0275fac=function(t){return new(t||i)(n(l),n(p))},i.\u0275prov=c({token:i,factory:i.\u0275fac,providedIn:"root"});let o=i;return o})();export{v as a};
