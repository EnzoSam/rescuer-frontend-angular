import{a as b}from"./chunk-WKY2EOFO.js";import{a as J,b as K}from"./chunk-C5R6XGME.js";import{A as h,C as U,D as me,E as se,F as le,G as $,I as H,J as z,K as ee,L as Q,a as x,b as R,c as F,d as N,e as P,f as q,h as T,k as w,l as j,m as D,n as Z,q as A,r as V,t as L,u as c,w as G,x as B,y as oe,z as ne}from"./chunk-XYCD3XRP.js";import{Aa as a,Ba as i,Ca as p,Ka as g,Ma as ae,O as v,Ra as n,Sa as C,Va as _,ga as s,ha as l,mb as X,na as W,nc as k,oa as d,ob as M,pc as Y,qc as O,ua as f,ub as I,va as re,wb as S,xb as Ce}from"./chunk-GA2MPP4C.js";function xe(o,r){if(o&1&&(a(0,"mat-error"),n(1),i()),o&2){let E=ae();s(1),C(E.getErrorMessage())}}var _e=(()=>{let r=class r{constructor(m,t,e,u){this._authService=m,this._router=t,this._uiService=e,this._activateRoute=u,this.email=new h("",[c.required,c.email]),this.password=new h("",[c.required]),this.hide=!0,this.login=this._authService.newLogin()}ngOnInit(){this._activateRoute.snapshot.paramMap.has("out")&&this._activateRoute.params.subscribe(m=>{let t=m.out;t&&t==="1"&&(this._authService.logOut(),this._router.navigate(["../home"]))})}getErrorMessage(){return this.email.hasError("required")?"El email es requerido":this.email.hasError("email")?"El email no es v\xE1lido":""}submit(m){m.preventDefault(),this.login.email=this.email.value+"",this.login.password=this.password.value+"",this._authService.login(this.login).then(t=>{console.log(t),this._authService.rememberUser(this.login.email,t.token),this._router.navigate(["../home"])}).catch(t=>{console.log(t),t.status===401?this._uiService.setNewErrorStatus(t.error.message,t):this._uiService.setNewErrorStatus(t.message,t)})}};r.\u0275fac=function(t){return new(t||r)(l(b),l(S),l(w),l(I))},r.\u0275cmp=v({type:r,selectors:[["app-login"]],standalone:!0,features:[_],decls:30,vars:7,consts:[[1,"login-container"],["action","",3,"ngSubmit"],["appearance","fill"],["matInput","","placeholder","email@example.com","required","",3,"formControl"],["matInput","",3,"formControl","type"],["mat-icon-button","","matSuffix","",3,"click"],["mat-button","","routerLink","../reset-password","color","primary"],["mat-raised-button","","color","primary"],["mat-button","","routerLink","../register","color","primary"]],template:function(t,e){t&1&&(a(0,"div",0)(1,"mat-card")(2,"mat-card-header")(3,"mat-card-title"),n(4,"Iniciar Sesi\xF3n"),i(),a(5,"mat-card-subtitle"),n(6,"Inicia sesi\xF3n para acceder a todas las funcionalidades de la plataforma"),i()(),a(7,"mat-card-content")(8,"form",1),g("ngSubmit",function(y){return e.submit(y)}),a(9,"mat-form-field",2)(10,"mat-label"),n(11,"Ingresa tu email"),i(),p(12,"input",3),f(13,xe,2,1,"mat-error"),i(),a(14,"mat-form-field",2)(15,"mat-label"),n(16,"Ingresa tu password"),i(),p(17,"input",4),a(18,"button",5),g("click",function(){return e.hide=!e.hide}),a(19,"mat-icon"),n(20),i()()(),a(21,"p")(22,"small")(23,"button",6),n(24,"Olvide mi contrase\xF1a"),i()()(),a(25,"button",7),n(26,"Iniciar sesi\xF3n"),i(),a(27,"button",8),n(28,"Registrarme"),i()()(),p(29,"mat-card-actions"),i()()),t&2&&(s(12),d("formControl",e.email),s(1),re(13,e.email.invalid?13:-1),s(4),d("formControl",e.password)("type",e.hide?"password":"text"),s(1),W("aria-label","Ocultar password")("aria-pressed",e.hide),s(2),C(e.hide?"visibility_off":"visibility"))},dependencies:[M,Ce,T,x,P,F,q,N,R,V,A,j,D,Z,K,J,H,U,L,G,B,$,ne,z,me,Q,ee,O,k,Y],styles:[".login-container[_ngcontent-%COMP%]{display:flex;flex-direction:column;width:100%;height:calc(100vh - 80px);align-items:center;justify-content:center;padding:20px}mat-card[_ngcontent-%COMP%]{width:400px}mat-card-content[_ngcontent-%COMP%]{display:flex;flex-direction:column;padding-top:20px}form[_ngcontent-%COMP%]{display:flex;flex-direction:column}@media (max-width: 600px){mat-card[_ngcontent-%COMP%]{width:100%}}"]});let o=r;return o})();function Re(o,r){o&1&&(a(0,"mat-error"),n(1,"Requerido"),i())}function Fe(o,r){o&1&&(a(0,"mat-error"),n(1,"Invalido"),i())}function Ne(o,r){if(o&1&&f(0,Re,2,0,"mat-error",5)(1,Fe,2,0,"mat-error",5),o&2){let E=ae();d("ngIf",E.email.errors==null?null:E.email.errors.required),s(1),d("ngIf",E.email.errors==null?null:E.email.errors.email)}}function Pe(o,r){o&1&&(a(0,"mat-error"),n(1,"Requerido"),i())}function qe(o,r){o&1&&(a(0,"mat-error"),n(1,"Requerido"),i())}function Te(o,r){o&1&&(a(0,"mat-error"),n(1,"Requerido"),i())}var be=(()=>{let r=class r{constructor(m,t,e){this._authService=m,this._router=t,this._uiService=e,this.hide=!0,this.register=m.newRegister(),this.form=new oe({email:new h("",[c.required,c.email]),password:new h("",[c.required]),name:new h("",[c.required]),lastName:new h("",[c.required])})}get email(){return this.form.get("email")}get name(){return this.form.get("name")}get lastName(){return this.form.get("lastName")}get password(){return this.form.get("password")}submit(m){m.preventDefault(),this.register=this.form.value,console.warn(this.register),this._authService.initRegister(this.register).then(t=>{t&&t.statusCode==200?this._router.navigate(["../auth/verify"]):this._uiService.setNewErrorStatus(t.message,void 0)}).catch(t=>{console.log(t),this._uiService.setNewErrorStatus(t.message,t)})}};r.\u0275fac=function(t){return new(t||r)(l(b),l(S),l(w))},r.\u0275cmp=v({type:r,selectors:[["app-register"]],standalone:!0,features:[_],decls:35,vars:10,consts:[[1,"register-container"],[3,"formGroup","ngSubmit"],["appearance","fill"],["matInput","","placeholder","email@example.com","formControlName","email","required",""],["matInput","","formControlName","name","required",""],[4,"ngIf"],["matInput","","formControlName","lastName","required",""],["formControlName","password","matInput","",3,"type"],["mat-icon-button","","matSuffix","",3,"click"],["mat-raised-button","","color","primary",3,"disabled"]],template:function(t,e){t&1&&(a(0,"div",0)(1,"form",1),g("ngSubmit",function(y){return e.submit(y)}),a(2,"mat-card")(3,"mat-card-header")(4,"mat-card-title"),n(5,"Registrar"),i(),a(6,"mat-card-subtitle"),n(7,"Ingresa tu email para iniciar el registro"),i()(),a(8,"mat-card-content")(9,"mat-form-field",2)(10,"mat-label"),n(11,"Email"),i(),p(12,"input",3),f(13,Ne,2,2),i(),a(14,"mat-form-field",2)(15,"mat-label"),n(16,"Nombres"),i(),p(17,"input",4),f(18,Pe,2,0,"mat-error",5),i(),a(19,"mat-form-field",2)(20,"mat-label"),n(21,"Apellidos"),i(),p(22,"input",6),f(23,qe,2,0,"mat-error",5),i(),a(24,"mat-form-field",2)(25,"mat-label"),n(26,"Ingresa tu password"),i(),p(27,"input",7),a(28,"button",8),g("click",function(){return e.hide=!e.hide}),a(29,"mat-icon"),n(30),i()(),f(31,Te,2,0,"mat-error",5),i(),a(32,"button",9),n(33,"Registrar"),i()(),p(34,"mat-card-actions"),i()()()),t&2&&(s(1),d("formGroup",e.form),s(12),re(13,e.email&&e.email.invalid&&(e.email.dirty||e.email.touched)?13:-1),s(5),d("ngIf",e.name&&(e.name.errors==null?null:e.name.errors.required)),s(5),d("ngIf",e.lastName&&(e.lastName.errors==null?null:e.lastName.errors.required)),s(4),d("type",e.hide?"password":"text"),s(1),W("aria-label","Ocultar password")("aria-pressed",e.hide),s(2),C(e.hide?"visibility_off":"visibility"),s(1),d("ngIf",e.password&&(e.password.errors==null?null:e.password.errors.required)),s(1),d("disabled",!e.form.valid))},dependencies:[M,X,T,x,P,F,q,N,R,V,A,j,D,Z,K,J,H,U,L,G,B,$,z,se,le,Q,ee,O,k,Y],styles:[".register-container[_ngcontent-%COMP%]{display:flex;flex-direction:column;width:100%;height:calc(100vh - 80px);align-items:center;justify-content:center;padding:20px}mat-card[_ngcontent-%COMP%]{width:400px}mat-card-content[_ngcontent-%COMP%]{display:flex;flex-direction:column}@media (max-width: 600px){mat-card[_ngcontent-%COMP%]{width:100%;margin:0;padding:0}form[_ngcontent-%COMP%]{width:100%}}"]});let o=r;return o})();var Me=(()=>{let r=class r{constructor(m){this._activateRoute=m,this.message="Revisa tu correo electronico, recibir\xE1s un email con un link para validar tu cuenta"}ngOnInit(){this._activateRoute.snapshot.paramMap.has("reset")&&this._activateRoute.params.subscribe(m=>{let t=m.reset;t&&t==="1"&&(this.message="Revisa tu correo electronico, recibir\xE1s un email con un link para resetear tu password")})}};r.\u0275fac=function(t){return new(t||r)(l(I))},r.\u0275cmp=v({type:r,selectors:[["app-verify-email-info"]],standalone:!0,features:[_],decls:3,vars:1,consts:[[1,"info-container"]],template:function(t,e){t&1&&(a(0,"div",0)(1,"h1"),n(2),i()()),t&2&&(s(2),C(e.message))},dependencies:[M],styles:[".info-container[_ngcontent-%COMP%]{display:flex;flex-direction:column;align-items:center;justify-self:center;padding:20px}"]});let o=r;return o})();var ye=(()=>{let r=class r{constructor(m,t,e,u,y){this._route=m,this._authService=t,this._router=e,this._activateRoute=u,this._uiService=y}ngOnInit(){!this._activateRoute.snapshot.paramMap.has("email")||!this._activateRoute.snapshot.paramMap.has("token")||this._activateRoute.params.subscribe(m=>{let t=m.email,e=m.token;t&&e&&this._authService.validateMail(t,e).then(u=>{console.log(u),u.code==200?this._router.navigate(["../auth/login"]):this._uiService.setNewErrorStatus(u.message,u)}).catch(u=>{this._uiService.setNewErrorStatus(u,u)})})}};r.\u0275fac=function(t){return new(t||r)(l(I),l(b),l(S),l(I),l(w))},r.\u0275cmp=v({type:r,selectors:[["app-validate-email"]],standalone:!0,features:[_],decls:2,vars:0,template:function(t,e){t&1&&(a(0,"p"),n(1,"Vaidando cuenta..."),i())},dependencies:[M]});let o=r;return o})();function ke(o,r){o&1&&(a(0,"mat-error"),n(1,"Requerido"),i())}function Oe(o,r){o&1&&(a(0,"mat-error"),n(1,"Email inv\xE1lido"),i())}var Ie=(()=>{let r=class r{constructor(m,t,e){this._authService=m,this._uiService=t,this._router=e,this.email=new h("",[c.required,c.email]),this.hide=!1}submit(m){m.preventDefault();let t=this.email.value+"";this._authService.requestResetPassword(t).then(e=>{e.code==200?this._router.navigate(["../auth/verify","1"]):this._uiService.setNewErrorStatus(e.message,e)}).catch(e=>{this._uiService.setNewErrorStatus(e.message,e)})}};r.\u0275fac=function(t){return new(t||r)(l(b),l(w),l(S))},r.\u0275cmp=v({type:r,selectors:[["app-reset-password"]],standalone:!0,features:[_],decls:18,vars:4,consts:[[1,"login-container"],["action","",3,"ngSubmit"],["appearance","fill"],["matInput","","placeholder","email@example.com","required","",3,"formControl"],[4,"ngIf"],["mat-raised-button","","color","primary",3,"disabled"]],template:function(t,e){t&1&&(a(0,"div",0)(1,"mat-card")(2,"mat-card-header")(3,"mat-card-title"),n(4,"Cambio de contrase\xF1a"),i(),a(5,"mat-card-subtitle"),n(6,"Ingresa tu correo para blanquear tu password"),i()(),a(7,"mat-card-content")(8,"form",1),g("ngSubmit",function(y){return e.submit(y)}),a(9,"mat-form-field",2)(10,"mat-label"),n(11,"Ingresa tu email"),i(),p(12,"input",3),f(13,ke,2,0,"mat-error",4)(14,Oe,2,0,"mat-error",4),i(),a(15,"button",5),n(16,"Cambiar contrase\xF1a"),i()()(),p(17,"mat-card-actions"),i()()),t&2&&(s(12),d("formControl",e.email),s(1),d("ngIf",e.email&&(e.email.errors==null?null:e.email.errors.required)),s(1),d("ngIf",e.email&&(e.email.errors==null?null:e.email.errors.invalid)),s(1),d("disabled",e.email.invalid))},dependencies:[M,X,T,x,P,F,q,N,R,V,A,j,D,K,J,H,U,L,G,B,$,ne,z,me,Q,O,k],styles:[".login-container[_ngcontent-%COMP%]{display:flex;flex-direction:column;width:100%;height:calc(100vh - 80px);align-items:center;justify-content:center;padding:20px}mat-card[_ngcontent-%COMP%]{width:400px}mat-card-content[_ngcontent-%COMP%]{display:flex;flex-direction:column}form[_ngcontent-%COMP%]{display:flex;flex-direction:column}@media (max-width: 600px){mat-card[_ngcontent-%COMP%]{width:100%}}"]});let o=r;return o})();var pe=class{static PasswordMatch(r){let E=r.get("password")?.value,m=r.get("password2")?.value;return E===m?null:{passwordMismatch:!0}}};function je(o,r){o&1&&(a(0,"mat-error"),n(1,"Requerido"),i())}function De(o,r){o&1&&(a(0,"mat-error"),n(1,"Requerido"),i())}function Ae(o,r){o&1&&(a(0,"mat-error"),n(1," Las contrase\xF1as no coinciden "),i())}var Ee=(()=>{let r=class r{constructor(m,t,e,u){this._activateRoute=m,this._authService=t,this._uiService=e,this._router=u,this.hide=!0,this.form=new oe({password:new h("",[c.required]),password2:new h("",[c.required])},{validators:pe.PasswordMatch})}ngOnInit(){!this._activateRoute.snapshot.paramMap.has("email")||!this._activateRoute.snapshot.paramMap.has("token")||this._activateRoute.params.subscribe(m=>{this.mail=m.email,this.token=m.token})}get password(){return this.form.get("password")}get password2(){return this.form.get("password2")}submit(m){m.preventDefault(),!(!this.mail||!this.token||!this.password?.value)&&this._authService.changePassword(this.mail,this.token,this.password.value).then(t=>{t.code==200?this._router.navigate(["../verify","1"]):this._uiService.setNewErrorStatus(t.message,t)}).catch(t=>{this._uiService.setNewErrorStatus(t.message,t)})}};r.\u0275fac=function(t){return new(t||r)(l(I),l(b),l(w),l(S))},r.\u0275cmp=v({type:r,selectors:[["app-new-password"]],standalone:!0,features:[_],decls:29,vars:13,consts:[[1,"login-container"],[3,"formGroup","ngSubmit"],["appearance","fill"],["formControlName","password","matInput","",3,"type"],["mat-icon-button","","matSuffix","",3,"click"],[4,"ngIf"],["formControlName","password2","matInput","",3,"type"],["mat-raised-button","","color","primary",3,"disabled"]],template:function(t,e){t&1&&(a(0,"div",0)(1,"mat-card")(2,"mat-card-header")(3,"mat-card-title"),n(4,"Cambio de contrase\xF1a"),i(),a(5,"mat-card-subtitle"),n(6,"Ingresa tu correo para blanquear tu password"),i()(),a(7,"mat-card-content")(8,"form",1),g("ngSubmit",function(y){return e.submit(y)}),a(9,"mat-form-field",2)(10,"mat-label"),n(11,"Ingresa tu password"),i(),p(12,"input",3),a(13,"button",4),g("click",function(){return e.hide=!e.hide}),a(14,"mat-icon"),n(15),i()(),f(16,je,2,0,"mat-error",5),i(),a(17,"mat-form-field",2)(18,"mat-label"),n(19,"Repite la password"),i(),p(20,"input",6),a(21,"button",4),g("click",function(){return e.hide=!e.hide}),a(22,"mat-icon"),n(23),i()(),f(24,De,2,0,"mat-error",5),i(),f(25,Ae,2,0,"mat-error",5),a(26,"button",7),n(27,"Cambiar contrase\xF1a"),i()()(),p(28,"mat-card-actions"),i()()),t&2&&(s(8),d("formGroup",e.form),s(4),d("type",e.hide?"password":"text"),s(1),W("aria-label","Ocultar password")("aria-pressed",e.hide),s(2),C(e.hide?"visibility_off":"visibility"),s(1),d("ngIf",e.password&&(e.password.errors==null?null:e.password.errors.required)),s(4),d("type",e.hide?"password":"text"),s(1),W("aria-label","Ocultar password")("aria-pressed",e.hide),s(2),C(e.hide?"visibility_off":"visibility"),s(1),d("ngIf",e.password2&&(e.password2.errors==null?null:e.password2.errors.required)),s(1),d("ngIf",e.form.hasError("passwordMismatch")&&(e.password2==null?null:e.password2.touched)),s(1),d("disabled",e.form.invalid))},dependencies:[M,X,T,x,P,F,q,N,R,V,A,j,D,Z,K,J,H,U,L,G,B,z,se,le,Q,ee,O,k,Y],styles:[".login-container[_ngcontent-%COMP%]{display:flex;flex-direction:column;width:100%;height:calc(100vh - 80px);align-items:center;justify-content:center}mat-card[_ngcontent-%COMP%]{margin-top:-200px;width:400px}mat-card-content[_ngcontent-%COMP%]{display:flex;flex-direction:column}"]});let o=r;return o})();var Nt=[{path:"",redirectTo:"login",pathMatch:"full"},{path:"login",component:_e},{path:"logout/:out",component:_e},{path:"register",component:be},{path:"reset-password",component:Ie},{path:"verify",pathMatch:"full",component:Me},{path:"verify/:reset",component:Me},{path:"validate/:email/:token",component:ye},{path:"reset/:email/:token",component:Ee}];export{Nt as AuthRoutes};
